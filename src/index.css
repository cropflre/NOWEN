@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   VIBE CODING 性能优化 - GPU 加速辅助类
   ============================================ */

/* 强制开启 GPU 加速，防止重绘 */
.hardware-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* 提示浏览器即将发生变换，优化动画性能 */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* 组合提示 */
.will-change-all {
  will-change: transform, opacity;
}

/* 减少模糊效果的性能消耗 */
.optimize-blur {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* ============================================
   专业级主题系统 - Solar Clarity / Deep Space
   ============================================ */

:root {
  /* 旧版兼容 */
  --nebula-cyan: #00f2fe;
  --nebula-blue: #4facfe;
  --nebula-purple: #667eea;
  --nebula-pink: #f093fb;
  --nebula-orange: #f5576c;
  
  /* 主题系统变量 - 默认深色 */
  --color-primary: #667eea;
  --color-primary-light: #818cf8;
  --color-primary-dark: #4f46e5;
  --color-accent: #06b6d4;
  --color-accent-light: #22d3ee;
  --color-bg-primary: #0a0a0a;
  --color-bg-secondary: #0f0f12;
  --color-bg-tertiary: #171720;
  --color-bg-gradient: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(102, 126, 234, 0.15), transparent);
  --color-text-primary: rgba(255, 255, 255, 0.95);
  --color-text-secondary: rgba(255, 255, 255, 0.72);
  --color-text-muted: rgba(255, 255, 255, 0.45);
  --color-border: rgba(255, 255, 255, 0.1);
  --color-border-light: rgba(255, 255, 255, 0.05);
  --color-glass: rgba(23, 23, 32, 0.5);
  --color-glass-border: rgba(255, 255, 255, 0.1);
  --color-glass-hover: rgba(255, 255, 255, 0.05);
  --color-shadow: none;
  --color-shadow-hover: none;
  --color-glow: rgba(102, 126, 234, 0.6);
  --color-glow-secondary: rgba(6, 182, 212, 0.5);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-size: 16px;
  scroll-behavior: smooth;
}

body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
  min-height: 100vh;
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
  transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
              color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 背景渐变层 */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--color-bg-gradient);
  pointer-events: none;
  z-index: -1;
  transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ============================================
   主题切换动画 - 圆圈扩散效果
   ============================================ */

@keyframes theme-transition-expand {
  from {
    clip-path: circle(0% at var(--origin-x, 50%) var(--origin-y, 50%));
  }
  to {
    clip-path: circle(150% at var(--origin-x, 50%) var(--origin-y, 50%));
  }
}

.theme-transitioning {
  animation: theme-transition-expand 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* ============================================
   日间模式 - Solar Clarity
   高品质纸张质感 + 弥散阴影
   ============================================ */

/* 滚动条 - 日间 */
.light ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}

.light ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

/* 文字选中 - 日间 */
.light ::selection {
  background: var(--color-primary);
  color: white;
}

/* ============================================
   夜间模式 - Deep Space
   深邃层次 + 流光发光
   ============================================ */

/* 滚动条 - 夜间 */
.dark ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.08);
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* ============================================
   字体类
   ============================================ */

.font-serif {
  font-family: 'Playfair Display', Georgia, serif;
}

.font-mono {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
}

/* ============================================
   滚动条 - 极简风格
   ============================================ */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* 默认选中 */
::selection {
  background: var(--color-primary);
  color: white;
}

/* ============================================
   行数限制
   ============================================ */

.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ============================================
   渐变文字 - 主题自适应
   ============================================ */

.gradient-text {
  background: linear-gradient(135deg, var(--color-accent), var(--color-primary), var(--color-primary-light));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.light .gradient-text {
  background: linear-gradient(135deg, var(--color-primary-dark), var(--color-primary), var(--color-accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ============================================
   玻璃态容器 - 专业级
   ============================================ */

/* 深色模式玻璃 - bg-neutral-900/50 */
.glass {
  background: var(--color-glass);
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border: 1px solid var(--color-glass-border);
  box-shadow: var(--color-shadow);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass:hover {
  background: var(--color-glass-hover);
  box-shadow: var(--color-shadow-hover);
}

/* 日间模式玻璃 - 纯白80% + 超强模糊 */
.light .glass {
  background: var(--color-glass);
  backdrop-filter: blur(40px) saturate(200%);
  -webkit-backdrop-filter: blur(40px) saturate(200%);
  border: 1px solid var(--color-glass-border);
  box-shadow: var(--color-shadow);
}

.light .glass:hover {
  background: var(--color-glass-hover);
  box-shadow: var(--color-shadow-hover);
}

/* ============================================
   专业卡片 - Bento Grid 优化
   ============================================ */

.theme-card {
  position: relative;
  background: var(--color-glass);
  border: 1px solid var(--color-glass-border);
  border-radius: 1.5rem;
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  box-shadow: var(--color-shadow);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
}

/* 日间卡片 Hover - 上浮 + 阴影加深 */
.light .theme-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--color-shadow-hover);
}

/* 夜间卡片 Hover - 边框流光 */
.dark .theme-card {
  position: relative;
}

.dark .theme-card::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(
    135deg,
    transparent 40%,
    var(--color-primary) 50%,
    var(--color-accent) 60%,
    transparent 70%
  );
  background-size: 300% 300%;
  background-position: 0% 0%;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.4s, background-position 0.6s;
  pointer-events: none;
}

.dark .theme-card:hover::before {
  opacity: 1;
  background-position: 100% 100%;
}

/* ============================================
   全局光照系统 - The Global Illumination
   让应用看起来"通电"，卡片具有"能量场"
   ============================================ */

/* 核心能量卡片 - 带电设备 */
.vibe-card {
  position: relative;
  overflow: hidden;
  border-radius: 1rem;
  border: 1px solid rgba(255, 255, 255, 0.05);
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  transition: all 500ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* 悬停状态：通电唤醒 */
.vibe-card:hover {
  border-color: rgba(255, 255, 255, 0.2);
  box-shadow: 0 0 30px var(--color-glow);
  /* 内部灯管亮起 */
  background: linear-gradient(
    145deg, 
    rgba(255, 255, 255, 0.1) 0%, 
    rgba(255, 255, 255, 0.05) 100%
  );
  /* 轻微悬浮，保持重量感 */
  transform: translateY(-2px);
}

/* 能量呼吸动画 - 可选增强 */
.vibe-card--breathing {
  animation: vibe-breathe 4s ease-in-out infinite;
}

@keyframes vibe-breathe {
  0%, 100% {
    box-shadow: 0 0 15px rgba(102, 126, 234, 0.2);
  }
  50% {
    box-shadow: 0 0 25px rgba(102, 126, 234, 0.35);
  }
}

/* 能量边框流光 - 高亮态 */
.vibe-card--glow::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(
    135deg,
    transparent 30%,
    var(--color-primary) 50%,
    var(--color-accent) 70%,
    transparent 90%
  );
  background-size: 400% 400%;
  background-position: 0% 0%;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.5s, background-position 0.8s;
  pointer-events: none;
  z-index: 1;
}

.vibe-card--glow:hover::before {
  opacity: 1;
  background-position: 100% 100%;
}

/* 日间模式适配 - 用弥散阴影替代发光 */
.light .vibe-card {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.05);
}

.light .vibe-card:hover {
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08);
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(0, 0, 0, 0.1);
}

.light .vibe-card--glow::before {
  display: none; /* 日间不需要流光 */
}

/* ============================================
   夜间 Spotlight 效果 - 鼠标跟随光晕
   ============================================ */

.dark .spotlight-container {
  position: relative;
  overflow: hidden;
}

.dark .spotlight {
  position: absolute;
  width: 400px;
  height: 400px;
  background: radial-gradient(
    circle at center,
    var(--color-glow-secondary) 0%,
    transparent 70%
  );
  pointer-events: none;
  opacity: 0;
  transform: translate(-50%, -50%);
  transition: opacity 0.3s;
  z-index: 1;
}

.dark .spotlight-container:hover .spotlight {
  opacity: 0.6;
}

/* ============================================
   发光效果 - 主题自适应
   ============================================ */

.glow-sm {
  box-shadow: 0 0 15px var(--color-glow);
}

.glow-md {
  box-shadow: 0 0 30px var(--color-glow);
}

.glow-lg {
  box-shadow: 0 0 60px var(--color-glow);
}

.glow-accent {
  box-shadow: 0 0 40px var(--color-glow-secondary);
}

/* 日间模式：用弥散阴影替代发光 */
.light .glow-sm,
.light .glow-md,
.light .glow-lg,
.light .glow-accent {
  box-shadow: var(--color-shadow);
}

/* 旧版兼容 */
.glow-cyan {
  box-shadow: 0 0 40px rgba(0, 242, 254, 0.3);
}

.glow-pink {
  box-shadow: 0 0 40px rgba(240, 147, 251, 0.3);
}

/* ============================================
   动画
   ============================================ */

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.animate-shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--color-glass-hover) 50%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: shimmer 2s linear infinite;
}

@keyframes meteor {
  0% {
    transform: rotate(215deg) translateX(0);
    opacity: 1;
  }
  70% {
    opacity: 1;
  }
  100% {
    transform: rotate(215deg) translateX(-500px);
    opacity: 0;
  }
}

.animate-meteor {
  animation: meteor 5s linear infinite;
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 20px var(--color-glow);
  }
  50% {
    box-shadow: 0 0 40px var(--color-glow);
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes border-beam {
  0% { offset-distance: 0%; }
  100% { offset-distance: 100%; }
}

.animate-border-beam {
  animation: border-beam var(--duration, 12s) infinite linear;
}

/* Border Beam Dash - SVG跑马灯效果 */
@keyframes border-beam-dash {
  0% { stroke-dashoffset: 0; }
  100% { stroke-dashoffset: calc(-1 * var(--perimeter, 1000)); }
}

/* Border Beam Spin - 旋转流光效果（备用） */
@keyframes border-beam-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes spotlight-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-spotlight-rotate {
  animation: spotlight-rotate 8s linear infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-float-slow {
  animation: float 8s ease-in-out infinite;
}

/* ============================================
   骨架屏加载 - 主题自适应
   ============================================ */

.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-border-light) 25%,
    var(--color-border) 50%,
    var(--color-border-light) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 8px;
}

.light .skeleton {
  background: linear-gradient(
    90deg,
    rgba(0, 0, 0, 0.03) 25%,
    rgba(0, 0, 0, 0.06) 50%,
    rgba(0, 0, 0, 0.03) 75%
  );
  background-size: 200% 100%;
}

/* ============================================
   表单元素
   ============================================ */

.vanish-text {
  opacity: 0;
  transition: opacity 0.3s ease;
}

input:focus,
button:focus {
  outline: none;
}

.focus-ring:focus {
  box-shadow: 0 0 0 2px var(--color-primary);
}

/* 日间搜索框 */
.light .search-input {
  background: #f4f4f5;
  border: 1px solid transparent;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.light .search-input:focus {
  background: white;
  border-color: var(--color-border);
  box-shadow: 0 0 0 4px var(--color-glow);
}

/* ============================================
   噪点纹理 - 若隐若现（0.03 透明度）
   ============================================ */

.noise::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  z-index: 9999;
}

/* 日间模式噪点更淡 */
.light .noise::after {
  opacity: 0.015;
}

/* ============================================
   响应式排版
   ============================================ */

@media (max-width: 640px) {
  html {
    font-size: 14px;
  }
}

/* ============================================
   打印样式
   ============================================ */

@media print {
  .no-print {
    display: none !important;
  }
}
